<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BICEPS: Pool&lt; T, N &gt; Class Template Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="/home/buote/programming/BICEPS/doc/doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">BICEPS
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Pool&lt; T, N &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Pool" -->
<p><a href="class_pool-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pool.html#af71e2c9e63c7a14525b20806f3c40c23">Pool</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pool.html#ae95409f584dfb0652cca2a7b88756388">defrag</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pool.html#ad5d026569d79c8c66f6910389b449ba1">deleteObject</a> (void *mempointer)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pool.html#a2bd714fb16bee83fad157d9b2540ac39">getNewObject</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_pool.html#a8bf592c67d376edd20bf24a0028c9761">reinit</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85727665b8375a6090d786e1de328cd6"></a><!-- doxytag: member="Pool::current_list_start" ref="a85727665b8375a6090d786e1de328cd6" args="" -->
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>current_list_start</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b2184ae0ff3f8fbb396268aaa68d65f"></a><!-- doxytag: member="Pool::freeslot" ref="a9b2184ae0ff3f8fbb396268aaa68d65f" args="" -->
size_t *&#160;</td><td class="memItemRight" valign="bottom"><b>freeslot</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9824c7cb7e4069084cbbd4458efd3faf"></a><!-- doxytag: member="Pool::memory" ref="a9824c7cb7e4069084cbbd4458efd3faf" args="" -->
void *&#160;</td><td class="memItemRight" valign="bottom"><b>memory</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae91ca21e225ae097daf8dcb343392ab9"></a><!-- doxytag: member="Pool::sType" ref="ae91ca21e225ae097daf8dcb343392ab9" args="" -->
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>sType</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T, size_t N&gt;<br/>
class Pool&lt; T, N &gt;</h3>

<p>This memory pool can be used for as a container for a limited number of "small" uniformingly sized objects. A large boost is gained by saving a lot of malloc/free calls, as the objects will all be placed in this container. The cache-hit percentage will also benefit from it because the container (and therefore its elements) will be continuous in the memory instead of scattered. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Buote Xu (<a href="mailto:Buote.Xu@stud.uni-heidelberg.de">Buote.Xu@stud.uni-heidelberg.de</a>) </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>January, 2010</dd></dl>
<p>This class has a very specific use for ETS, a global object of class <a class="el" href="class_pool.html" title="This memory pool can be used for as a container for a limited number of &quot;small&quot; uniformingly sized ob...">Pool</a> is created to save temporary tuples created by pepsplice. During its initialization, a sufficiently large block of memory is allocated via malloc. To allow a class to use this container, <code>void * Classname::operator new(size_t)</code> has to be overloaded. If more objects are concurrently placed into the container than slots are available, an exception is thrown, free'd slots will be re-used of course. Memory Usage will be the size of the container itself + POOLSIZE * sizeof(int) to memorize the list of free slots. Example Usage:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="class_pool.html" title="This memory pool can be used for as a container for a limited number of &quot;small&quot; uniformingly sized ob...">Pool&lt;Pepsplice::Tuple, POOLSIZE&gt;</a> __POOL__;
   <span class="keywordtype">void</span> * Tuple::operator new(<span class="keywordtype">size_t</span>)
  {
      <span class="keywordflow">return</span> __POOL__.<a class="code" href="class_pool.html#a2bd714fb16bee83fad157d9b2540ac39">getNewObject</a>();
  }
  <span class="keywordtype">void</span> Tuple::operator delete(<span class="keywordtype">void</span> * oldpointer)
  {
      __POOL__.<a class="code" href="class_pool.html#ad5d026569d79c8c66f6910389b449ba1">deleteObject</a>(oldpointer);
  }
</pre></div> 
<p>Definition at line <a class="el" href="pool_8h_source.html#l00037">37</a> of file <a class="el" href="pool_8h_source.html">pool.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af71e2c9e63c7a14525b20806f3c40c23"></a><!-- doxytag: member="Pool::Pool" ref="af71e2c9e63c7a14525b20806f3c40c23" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_pool.html">Pool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Standard constructor, will allocate memory according to the template parameters, initialize the free slots. </p>

<p>Definition at line <a class="el" href="pool_8h_source.html#l00049">49</a> of file <a class="el" href="pool_8h_source.html">pool.h</a>.</p>

<p>References <a class="el" href="pool_8h_source.html#l00110">Pool&lt; T, N &gt;::reinit()</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae95409f584dfb0652cca2a7b88756388"></a><!-- doxytag: member="Pool::defrag" ref="ae95409f584dfb0652cca2a7b88756388" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_pool.html#ae95409f584dfb0652cca2a7b88756388">defrag</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>After a lot of new/delete operations, the free slots will be scattered, calling new repeatedly will not get you continuous chunks of memory. defrag will not move used slots, but link free slots in order according to their index / memory placement. </p>

<p>Definition at line <a class="el" href="pool_8h_source.html#l00123">123</a> of file <a class="el" href="pool_8h_source.html">pool.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad5d026569d79c8c66f6910389b449ba1"></a><!-- doxytag: member="Pool::deleteObject" ref="ad5d026569d79c8c66f6910389b449ba1" args="(void *mempointer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_pool.html#ad5d026569d79c8c66f6910389b449ba1">deleteObject</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>mempointer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The equivalent to operator delete, given an address, it will tag the according chunk as "free". </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mempointer</td><td>*this </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pool_8h_source.html#l00094">94</a> of file <a class="el" href="pool_8h_source.html">pool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2bd714fb16bee83fad157d9b2540ac39"></a><!-- doxytag: member="Pool::getNewObject" ref="a2bd714fb16bee83fad157d9b2540ac39" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="class_pool.html#a2bd714fb16bee83fad157d9b2540ac39">getNewObject</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>You get a pointer to the slot where you can put in your object, this should be the returnValue of your overloaded new operator. After claiming that memory chunk, it will get tagged as "used" via freeslot. According to specification, a void pointer has to be returned in the operator new(size_t) call, be careful as only char* can be used for calculation. </p>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">Address</td><td>to memory chunk / object </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pool_8h_source.html#l00077">77</a> of file <a class="el" href="pool_8h_source.html">pool.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8bf592c67d376edd20bf24a0028c9761"></a><!-- doxytag: member="Pool::reinit" ref="a8bf592c67d376edd20bf24a0028c9761" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_pool.html#a8bf592c67d376edd20bf24a0028c9761">reinit</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A reinitialization will render all objects in the container invalid, as all slots are tagged as free. Destructors will not be called. </p>

<p>Definition at line <a class="el" href="pool_8h_source.html#l00110">110</a> of file <a class="el" href="pool_8h_source.html">pool.h</a>.</p>

<p>Referenced by <a class="el" href="pool_8h_source.html#l00049">Pool&lt; T, N &gt;::Pool()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="pool_8h_source.html">pool.h</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 10 2012 17:29:17 for BICEPS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
